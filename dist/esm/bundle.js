import{jsxs as e,jsx as t}from"react/jsx-runtime";import{useMemo as r,useCallback as n,forwardRef as o,useRef as i,useEffect as a}from"react";import l from"linkify-string";"function"==typeof SuppressedError&&SuppressedError;!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".link-textarea-container__mirror a:link {\n  color: #0000ee !important;\n}\n\n.link-textarea-container__mirror a:visited {\n  color: #551a8b !important;\n}\n\n.link-textarea-container__mirror a {\n  pointer-events: auto !important;\n  text-decoration: underline;\n}\n");const c=e=>e.endsWith("px")?parseInt(e.slice(0,-2),10):0,s=o(((o,s)=>{var{containerStyle:d={},textareaStyle:u={},containerClassName:p="",textareaClassName:f="",linkTarget:g="_blank",fontColor:m="black",caretColor:y="black"}=o,h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(o,["containerStyle","textareaStyle","containerClassName","textareaClassName","linkTarget","fontColor","caretColor"]);const v=i(null),x=i(null),{resizeObserver:b,applyStyleToMirroredRef:T,setLinkifyText:C,copyTextToMirroredRef:S}=((e,t)=>{const o=t=>{if(!(null==e?void 0:e.current))throw new Error("Textarea ref is not defined");const r=c(t.paddingLeft)+c(t.paddingRight),n=c(t.paddingTop)+c(t.paddingBottom),{clientWidth:o,clientHeight:i}=e.current;return{width:o-r+"px",height:i-n+"px"}};return{resizeObserver:r((()=>new ResizeObserver((()=>{if(!t.current||!e.current)return;const{width:r,height:n}=o(getComputedStyle(e.current));t.current.style.width=r,t.current.style.height=n}))),[e,t,o]),applyStyleToMirroredRef:n((r=>{if(!(null==t?void 0:t.current)||!(null==e?void 0:e.current))return;const n=getComputedStyle(e.current);["border","borderLeft","borderRight","borderTop","borderBottom","boxSizing","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","padding","paddingLeft","paddingRight","paddingTop","margin","marginLeft","marginRight","marginTop","marginBottom","paddingBottom","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap","textAlign","borderRadius"].forEach((e=>{const r=e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("");t.current.style[r]=n[r]})),t.current.style.borderColor="transparent",(null==r?void 0:r.color)&&(t.current.style.color=r.color),(null==r?void 0:r.backgroundColor)&&(t.current.style.backgroundColor=r.backgroundColor)}),[t,e]),setLinkifyText:r=>{(null==t?void 0:t.current)&&e.current&&(t.current.innerHTML=l(e.current.value,{target:r}))},copyTextToMirroredRef:()=>{(null==e?void 0:e.current)&&(null==t?void 0:t.current)&&(t.current.textContent=e.current.value)}}})(v,x);return a((()=>{S(),T(u),C(g)}),[u,S]),a((()=>{if(null==v?void 0:v.current)return b.observe(v.current),()=>{b.disconnect()}}),[v,b]),a((()=>{if(!(null==v?void 0:v.current)||!(null==x?void 0:x.current))return;const e=()=>{v.current&&x.current&&(x.current.scrollTop=v.current.scrollTop)},t=()=>{C(g)};return v.current.addEventListener("scroll",e),v.current.addEventListener("input",t),()=>{var r,n;null===(r=v.current)||void 0===r||r.removeEventListener("scroll",e),null===(n=v.current)||void 0===n||n.removeEventListener("input",t)}}),[v,x,g,C]),e("div",{className:`link-textarea-container ${p}`,style:Object.assign(Object.assign({},d),{position:"relative"}),children:[t("textarea",Object.assign({ref:e=>{v.current=e,"function"==typeof s?s(e):s&&(s.current=e)},className:`link-textarea-container__textarea ${f}`,style:Object.assign(Object.assign({width:"100%",height:"100%",caretColor:y},u),{color:"transparent",position:"relative"})},h)),t("div",{ref:x,className:"link-textarea-container__mirror",style:{color:m,width:"100%",height:"100%",position:"absolute",top:0,left:0,right:0,userSelect:"none",overflow:"hidden",pointerEvents:"none"}})]})}));export{s as default};
//# sourceMappingURL=bundle.js.map
