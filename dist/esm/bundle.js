import{jsxs as e,jsx as t}from"react/jsx-runtime";import{useMemo as r,useCallback as n,forwardRef as o,useRef as i,useEffect as a}from"react";import c from"linkify-string";"function"==typeof SuppressedError&&SuppressedError;!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".link-textarea-container__mirror a:link {\n  color: #0000ee !important;\n}\n\n.link-textarea-container__mirror a:visited {\n  color: #551a8b !important;\n}\n\n.link-textarea-container__mirror a {\n  pointer-events: auto !important;\n  text-decoration: underline;\n}\n");var l=function(e){return e.endsWith("px")?parseInt(e.slice(0,-2),10):0},u=o((function(o,u){var d=o.containerStyle,s=void 0===d?{}:d,p=o.textareaStyle,f=void 0===p?{}:p,v=o.containerClassName,g=void 0===v?"":v,m=o.textareaClassName,y=void 0===m?"":m,h=o.linkTarget,x=void 0===h?"_blank":h,b=o.fontColor,T=void 0===b?"black":b,C=o.caretColor,S=void 0===C?"black":C,k=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(o,["containerStyle","textareaStyle","containerClassName","textareaClassName","linkTarget","fontColor","caretColor"]),O=i(null),w=i(null),E=function(e,t){var o=function(t){if(!(null==e?void 0:e.current))throw new Error("Textarea ref is not defined");var r=l(t.paddingLeft)+l(t.paddingRight),n=l(t.paddingTop)+l(t.paddingBottom),o=e.current;return{width:o.clientWidth-r+"px",height:o.clientHeight-n+"px"}};return{resizeObserver:r((function(){return new ResizeObserver((function(){if(t.current&&e.current){var r=o(getComputedStyle(e.current)),n=r.width,i=r.height;t.current.style.width=n,t.current.style.height=i}}))}),[e,t,o]),applyStyleToMirroredRef:n((function(r){if((null==t?void 0:t.current)&&(null==e?void 0:e.current)){var n=getComputedStyle(e.current);["border","borderLeft","borderRight","borderTop","borderBottom","boxSizing","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","padding","paddingLeft","paddingRight","paddingTop","margin","marginLeft","marginRight","marginTop","marginBottom","paddingBottom","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap","textAlign","borderRadius"].forEach((function(e){var r=e.split("-").map((function(e,t){return 0===t?e:e.charAt(0).toUpperCase()+e.slice(1)})).join("");t.current.style[r]=n[r]})),t.current.style.borderColor="transparent",(null==r?void 0:r.color)&&(t.current.style.color=r.color),(null==r?void 0:r.backgroundColor)&&(t.current.style.backgroundColor=r.backgroundColor)}}),[t,e]),setLinkifyText:function(r){(null==t?void 0:t.current)&&e.current&&(t.current.innerHTML=c(e.current.value,{target:r}))},copyTextToMirroredRef:function(){(null==e?void 0:e.current)&&(null==t?void 0:t.current)&&(t.current.textContent=e.current.value)}}}(O,w),j=E.resizeObserver,L=E.applyStyleToMirroredRef,_=E.setLinkifyText,R=E.copyTextToMirroredRef;return a((function(){R(),L(f),_(x)}),[f,R]),a((function(){if(null==O?void 0:O.current)return j.observe(O.current),function(){j.disconnect()}}),[O,j]),a((function(){if((null==O?void 0:O.current)&&(null==w?void 0:w.current)){var e=function(){O.current&&w.current&&(w.current.scrollTop=O.current.scrollTop)},t=function(){_(x)};return O.current.addEventListener("scroll",e),O.current.addEventListener("input",t),function(){var r,n;null===(r=O.current)||void 0===r||r.removeEventListener("scroll",e),null===(n=O.current)||void 0===n||n.removeEventListener("input",t)}}}),[O,w,x,_]),e("div",{className:"link-textarea-container ".concat(g),style:Object.assign(Object.assign({},s),{position:"relative"}),children:[t("textarea",Object.assign({ref:function(e){O.current=e,"function"==typeof u?u(e):u&&(u.current=e)},className:"link-textarea-container__textarea ".concat(y),style:Object.assign(Object.assign({width:"100%",height:"100%",caretColor:S},f),{color:"transparent",position:"relative"})},k)),t("div",{ref:w,className:"link-textarea-container__mirror",style:{color:T,width:"100%",height:"100%",position:"absolute",top:0,left:0,right:0,userSelect:"none",overflow:"hidden",pointerEvents:"none"}})]})}));export{u as default};
//# sourceMappingURL=bundle.js.map
